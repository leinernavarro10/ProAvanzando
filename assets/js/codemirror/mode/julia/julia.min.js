CodeMirror.defineMode("julia",function(e,t){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function r(e){var t=i(e);return"["==t||"{"==t}function i(e){return 0==e.scopes.length?null:e.scopes[e.scopes.length-1]}function a(e,t){var n=t.leaving_expr;if(t.leaving_expr=!1,n){if(e.match(/^'+/))return"operator";if(e.match("..."))return"operator"}if(e.eatSpace())return null;var a=e.peek();if("#"===a)return e.skipToEnd(),"comment";"["===a&&t.scopes.push("["),"{"===a&&t.scopes.push("{");var l=i(t);"["===l&&"]"===a&&(t.scopes.pop(),t.leaving_expr=!0),"{"===l&&"}"===a&&(t.scopes.pop(),t.leaving_expr=!0);var m;if((m=e.match(v,!1))&&t.scopes.push(m),!r(t)&&e.match(x,!1)&&t.scopes.pop(),r(t)&&e.match("end"))return"number";if(e.match("=>"))return"operator";if(e.match(/^[0-9\.]/,!1)){var p=RegExp(/^im\b/),h=!1;if(e.match(/^\d*\.\d+([ef][\+\-]?\d+)?/i)&&(h=!0),e.match(/^\d+\.\d*/)&&(h=!0),e.match(/^\.\d+/)&&(h=!0),h)return e.match(p),"number";var k=!1;if(e.match(/^0x[0-9a-f]+/i)&&(k=!0),e.match(/^0b[01]+/i)&&(k=!0),e.match(/^0o[0-7]+/i)&&(k=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),k=!0),e.match(/^0(?![\dx])/i)&&(k=!0),k)return e.match(p),"number"}return e.match(d)?(t.tokenize=o(e.current()),t.tokenize(e,t)):e.match(u)?"operator":e.match(s)?null:e.match(g)?"keyword":e.match(b)?"builtin":e.match(y)?"meta":e.match(f)?(t.leaving_expr=!0,"variable"):(e.next(),c)}function o(e){function n(n,o){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),r&&n.eol())return i}else{if(n.match(e))return o.tokenize=a,i;n.eat(/['"]/)}if(r){if(t.singleLineStringErrors)return c;o.tokenize=a}return i}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var r=1==e.length,i="string";return n.isString=!0,n}function l(e,t){k=null;var n=t.tokenize(e,t);return"."===e.current()?(null===(n=e.match(f,!1)?null:c)&&"meta"===t.lastStyle&&(n="meta"),n):n}var c="error",u=t.operators||/^(?:\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|<:|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b|\.{3})/,s=t.delimiters||/^[;,()[\]{}]/,f=t.identifiers||/^[_A-Za-z][_A-Za-z0-9]*!*/,m=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch"],p=["end","else","elseif","catch","finally"],h=["true","false","enumerate","open","close","nothing","NaN","Inf","print","println","Int8","Uint8","Int16","Uint16","Int32","Uint32","Int64","Uint64","Int128","Uint128","Bool","Char","Float16","Float32","Float64","Array","Vector","Matrix","String","UTF8String","ASCIIString","error","warn","info","@printf"],d=/^[br]?('|"{3}|")/,g=n(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype","ccall"]),b=n(h),v=n(m),x=n(p),y=/@[_A-Za-z][_A-Za-z0-9]*!*/,k=null;return{startState:function(){return{tokenize:a,scopes:[],leaving_expr:!1}},token:function(e,t){var n=l(e,t);return t.lastStyle=n,n},indent:function(e,t){var n=0;return"end"!=t&&"]"!=t&&"}"!=t&&"else"!=t&&"elseif"!=t&&"catch"!=t&&"finally"!=t||(n=-1),2*(e.scopes.length+n)},lineComment:"#",fold:"indent",electricChars:"edlsifyh]}"}}),CodeMirror.defineMIME("text/x-julia","julia");