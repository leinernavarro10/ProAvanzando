CodeMirror.defineMode("javascript",function(e,r){function t(e){for(var r,t=!1,n=!1;null!=(r=e.next());){if(!t){if("/"==r&&!n)return;"["==r?n=!0:n&&"]"==r&&(n=!1)}t=!t&&"\\"==r}}function n(e,r,t){return de=e,pe=t,r}function a(e,r){var a=e.next();if('"'==a||"'"==a)return r.tokenize=i(a),r.tokenize(e,r);if("."==a&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==a&&e.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(a))return n(a);if("="==a&&e.eat(">"))return n("=>","operator");if("0"==a&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),n("number","number");if(/\d/.test(a))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==a)return e.eat("*")?(r.tokenize=o,o(e,r)):e.eat("/")?(e.skipToEnd(),n("comment","comment")):"operator"==r.lastType||"keyword c"==r.lastType||"sof"==r.lastType||/^[\[{}\(,;:]$/.test(r.lastType)?(t(e),e.eatWhile(/[gimy]/),n("regexp","string-2")):(e.eatWhile(xe),n("operator","operator",e.current()));if("`"==a)return r.tokenize=u,u(e,r);if("#"==a)return e.skipToEnd(),n("error","error");if(xe.test(a))return e.eatWhile(xe),n("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var c=e.current(),l=ke.propertyIsEnumerable(c)&&ke[c];return l&&"."!=r.lastType?n(l.type,l.style,c):n("variable","variable",c)}function i(e){return function(r,t){for(var i,o=!1;null!=(i=r.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(t.tokenize=a),n("string","string")}}function o(e,r){for(var t,i=!1;t=e.next();){if("/"==t&&i){r.tokenize=a;break}i="*"==t}return n("comment","comment")}function u(e,r){for(var t,i=!1;null!=(t=e.next());){if(!i&&("`"==t||"$"==t&&e.eat("{"))){r.tokenize=a;break}i=!i&&"\\"==t}return n("quasi","string-2",e.current())}function c(e,r){r.fatArrowAt&&(r.fatArrowAt=null);var t=e.string.indexOf("=>",e.start);if(!(t<0)){for(var n=0,a=!1,i=t-1;i>=0;--i){var o=e.string.charAt(i),u=he.indexOf(o);if(u>=0&&u<3){if(!n){++i;break}if(0==--n)break}else if(u>=3&&u<6)++n;else if(/[$\w]/.test(o))a=!0;else if(a&&!n){++i;break}}a&&!n&&(r.fatArrowAt=i)}}function l(e,r,t,n,a,i){this.indented=e,this.column=r,this.type=t,this.prev=a,this.info=i,null!=n&&(this.align=n)}function f(e,r){for(n=e.localVars;n;n=n.next)if(n.name==r)return!0;for(var t=e.context;t;t=t.prev)for(var n=t.vars;n;n=n.next)if(n.name==r)return!0}function s(e,r,t,n,a){var i=e.cc;for(we.state=e,we.stream=a,we.marked=null,we.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():ye?g:h)(t,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return we.marked?we.marked:"variable"==t&&f(e,n)?"variable-2":r}}function d(){for(var e=arguments.length-1;e>=0;e--)we.cc.push(arguments[e])}function p(){return d.apply(null,arguments),!0}function m(e){function t(r){for(var t=r;t;t=t.next)if(t.name==e)return!0;return!1}var n=we.state;if(n.context){if(we.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function v(){we.state.context={prev:we.state.context,vars:we.state.localVars},we.state.localVars=Me}function y(){we.state.localVars=we.state.context.vars,we.state.context=we.state.context.prev}function b(e,r){var t=function(){var t=we.state,n=t.indented;"stat"==t.lexical.type&&(n=t.lexical.indented),t.lexical=new l(n,we.stream.column(),e,null,t.lexical,r)};return t.lex=!0,t}function k(){var e=we.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function x(e){return function(r){return r==e?p():";"==e?d():p(arguments.callee)}}function h(e,r){return"var"==e?p(b("vardef",r.length),D,x(";"),k):"keyword a"==e?p(b("form"),g,h,k):"keyword b"==e?p(b("form"),h,k):"{"==e?p(b("}"),U,k):";"==e?p():"if"==e?p(b("form"),g,h,k,K):"function"==e?p(Z):"for"==e?p(b("form"),L,h,k):"variable"==e?p(b("stat"),O):"switch"==e?p(b("form"),g,b("}","switch"),x("{"),U,k,k):"case"==e?p(g,x(":")):"default"==e?p(x(":")):"catch"==e?p(b("form"),v,x("("),ee,x(")"),h,k,y):"module"==e?p(b("form"),v,ae,y,k):"class"==e?p(b("form"),re,ne,k):"export"==e?p(b("form"),ie,k):"import"==e?p(b("form"),oe,k):d(b("stat"),g,x(";"),k)}function g(e){return M(e,!1)}function w(e){return M(e,!0)}function M(e,r){if(we.state.fatArrowAt==we.stream.start){var t=r?A:I;if("("==e)return p(v,b(")"),q(F,")"),k,x("=>"),t,y);if("variable"==e)return d(v,F,x("=>"),t,y)}var n=r?E:C;return ge.hasOwnProperty(e)?p(n):"function"==e?p(Z):"keyword c"==e?p(r?V:j):"("==e?p(b(")"),j,se,x(")"),k,n):"operator"==e||"spread"==e?p(r?w:g):"["==e?p(b("]"),le,k,n):"{"==e?N(W,"}",null,n):p()}function j(e){return e.match(/[;\}\)\],]/)?d():d(g)}function V(e){return e.match(/[;\}\)\],]/)?d():d(w)}function C(e,r){return","==e?p(g):E(e,r,!1)}function E(e,r,t){var n=0==t?C:E,a=0==t?g:w;return"=>"==r?p(v,t?A:I,y):"operator"==e?/\+\+|--/.test(r)?p(n):"?"==r?p(g,x(":"),a):p(a):"quasi"==e?(we.cc.push(n),T(r)):";"!=e?"("==e?N(w,")","call",n):"."==e?p(P,n):"["==e?p(b("]"),j,x("]"),k,n):void 0:void 0}function T(e){return"${"!=e.slice(e.length-2)?p():p(g,z)}function z(e){if("}"==e)return we.marked="string-2",we.state.tokenize=u,p()}function I(e){return c(we.stream,we.state),d("{"==e?h:g)}function A(e){return c(we.stream,we.state),d("{"==e?h:w)}function O(e){return":"==e?p(k,h):d(C,x(";"),k)}function P(e){if("variable"==e)return we.marked="property",p()}function W(e,r){if("variable"==e){if(we.marked="property","get"==r||"set"==r)return p($)}else if("number"==e||"string"==e)we.marked=e+" property";else if("["==e)return p(g,x("]"),S);if(ge.hasOwnProperty(e))return p(S)}function $(e){return"variable"!=e?d(S):(we.marked="property",p(Z))}function S(e){return":"==e?p(w):"("==e?d(Z):void 0}function q(e,r){function t(n){if(","==n){var a=we.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),p(e,t)}return n==r?p():p(x(r))}return function(n){return n==r?p():d(e,t)}}function N(e,r,t){for(var n=3;n<arguments.length;n++)we.cc.push(arguments[n]);return p(b(r,t),q(e,r),k)}function U(e){return"}"==e?p():d(h,U)}function _(e){if(be&&":"==e)return p(B)}function B(e){if("variable"==e)return we.marked="variable-3",p()}function D(){return d(F,_,H,J)}function F(e,r){return"variable"==e?(m(r),p()):"["==e?N(F,"]"):"{"==e?N(G,"}"):void 0}function G(e,r){return"variable"!=e||we.stream.match(/^\s*:/,!1)?("variable"==e&&(we.marked="property"),p(x(":"),F,H)):(m(r),p(H))}function H(e,r){if("="==r)return p(w)}function J(e){if(","==e)return p(D)}function K(e,r){if("keyword b"==e&&"else"==r)return p(b("form"),h,k)}function L(e){if("("==e)return p(b(")"),Q,x(")"),k)}function Q(e){return"var"==e?p(D,x(";"),X):";"==e?p(X):"variable"==e?p(R):d(g,x(";"),X)}function R(e,r){return"in"==r||"of"==r?(we.marked="keyword",p(g)):p(C,X)}function X(e,r){return";"==e?p(Y):"in"==r||"of"==r?(we.marked="keyword",p(g)):d(g,x(";"),Y)}function Y(e){")"!=e&&p(g)}function Z(e,r){return"*"==r?(we.marked="keyword",p(Z)):"variable"==e?(m(r),p(Z)):"("==e?p(v,b(")"),q(ee,")"),k,h,y):void 0}function ee(e){return"spread"==e?p(ee):d(F,_)}function re(e,r){if("variable"==e)return m(r),p(te)}function te(e,r){if("extends"==r)return p(g)}function ne(e){if("{"==e)return N(W,"}")}function ae(e,r){return"string"==e?p(h):"variable"==e?(m(r),p(ce)):void 0}function ie(e,r){return"*"==r?(we.marked="keyword",p(ce,x(";"))):"default"==r?(we.marked="keyword",p(g,x(";"))):d(h)}function oe(e){return"string"==e?p():d(ue,ce)}function ue(e,r){return"{"==e?N(ue,"}"):("variable"==e&&m(r),p())}function ce(e,r){if("from"==r)return we.marked="keyword",p(g)}function le(e){return"]"==e?p():d(w,fe)}function fe(e){return"for"==e?d(se,x("]")):","==e?p(q(w,"]")):d(q(w,"]"))}function se(e){return"for"==e?p(L,se):"if"==e?p(g,se):void 0}var de,pe,me=e.indentUnit,ve=r.statementIndent,ye=r.json,be=r.typescript,ke=function(){function e(e){return{type:e,style:"keyword"}}var r=e("keyword a"),t=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={if:e("if"),while:r,with:r,else:t,do:t,try:t,finally:t,return:n,break:n,continue:n,new:n,delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(be){var u={type:"variable",style:"variable-3"},c={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:u,number:u,bool:u,any:u};for(var l in c)o[l]=c[l]}return o}(),xe=/[+\-*&%=<>!?|~^]/,he="([{}])",ge={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0},we={state:null,column:null,marked:null,cc:null},Me={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new l((e||0)-me,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,r){if(e.sol()&&(r.lexical.hasOwnProperty("align")||(r.lexical.align=!1),r.indented=e.indentation(),c(e,r)),r.tokenize!=o&&e.eatSpace())return null;var t=r.tokenize(e,r);return"comment"==de?t:(r.lastType="operator"!=de||"++"!=pe&&"--"!=pe?de:"incdec",s(r,t,de,pe,e))},indent:function(e,t){if(e.tokenize==o)return CodeMirror.Pass;if(e.tokenize!=a)return 0;for(var n=t&&t.charAt(0),i=e.lexical,u=e.cc.length-1;u>=0;--u){var c=e.cc[u];if(c==k)i=i.prev;else if(c!=K)break}"stat"==i.type&&"}"==n&&(i=i.prev),ve&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var l=i.type,f=n==l;return"vardef"==l?i.indented+("operator"==e.lastType||","==e.lastType?i.info+1:0):"form"==l&&"{"==n?i.indented:"form"==l?i.indented+me:"stat"==l?i.indented+("operator"==e.lastType||","==e.lastType?ve||me:0):"switch"!=i.info||f||0==r.doubleIndentSwitch?i.align?i.column+(f?0:1):i.indented+(f?0:me):i.indented+(/^(?:case|default)\b/.test(t)?me:2*me)},electricChars:":{}",blockCommentStart:ye?null:"/*",blockCommentEnd:ye?null:"*/",lineComment:ye?null:"//",fold:"brace",helperType:ye?"json":"javascript",jsonMode:ye}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});