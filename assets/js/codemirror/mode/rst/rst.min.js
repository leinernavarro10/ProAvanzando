CodeMirror.defineMode("rst-base",function(e){function t(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,a){return void 0!==t[a]?t[a]:e})}function a(e){this.message=e}function c(e,t){if(!e)throw new a(t);return e}function r(e,t){var a=null;if(e.sol()&&e.match(U,!1))u(t,h,{mode:d,local:d.startState()});else if(e.sol()&&e.match(v))u(t,n),a="meta";else if(e.sol()&&e.match(y))u(t,r),a="header";else if(p(t)==P||e.match(P,!1))switch(l(t)){case 0:u(t,r,i(P,1)),c(e.match(/^:/)),a="meta";break;case 1:u(t,r,i(P,2)),c(e.match(g)),a="keyword",e.current().match(/^(?:math|latex)/)&&(t.tmp_stex=!0);break;case 2:u(t,r,i(P,3)),c(e.match(/^:`/)),a="meta";break;case 3:if(t.tmp_stex&&(t.tmp_stex=void 0,t.tmp={mode:k,local:k.startState()}),t.tmp){if("`"==e.peek()){u(t,r,i(P,4)),t.tmp=void 0;break}a=t.tmp.mode.token(e,t.tmp.local);break}u(t,r,i(P,4)),c(e.match(_)),a="string";break;case 4:u(t,r,i(P,5)),c(e.match(/^`/)),a="meta";break;case 5:u(t,r,i(P,6)),c(e.match(f));break;default:u(t,r),c(""==e.current())}else if(p(t)==j||e.match(j,!1))switch(l(t)){case 0:u(t,r,i(j,1)),c(e.match(/^`/)),a="meta";break;case 1:u(t,r,i(j,2)),c(e.match(_)),a="string";break;case 2:u(t,r,i(j,3)),c(e.match(/^`:/)),a="meta";break;case 3:u(t,r,i(j,4)),c(e.match(g)),a="keyword";break;case 4:u(t,r,i(j,5)),c(e.match(/^:/)),a="meta";break;case 5:u(t,r,i(j,6)),c(e.match(f));break;default:u(t,r),c(""==e.current())}else if(p(t)==z||e.match(z,!1))switch(l(t)){case 0:u(t,r,i(z,1)),c(e.match(/^:/)),a="meta";break;case 1:u(t,r,i(z,2)),c(e.match(g)),a="keyword";break;case 2:u(t,r,i(z,3)),c(e.match(/^:/)),a="meta";break;case 3:u(t,r,i(z,4)),c(e.match(f));break;default:u(t,r),c(""==e.current())}else if(p(t)==q||e.match(q,!1))switch(l(t)){case 0:u(t,r,i(q,1)),c(e.match(F)),a="variable-2";break;case 1:u(t,r,i(q,2)),e.match(/^_?_?/)&&(a="link");break;default:u(t,r),c(""==e.current())}else if(e.match(T))u(t,r),a="quote";else if(e.match(A))u(t,r),a="quote";else if(e.match(I))u(t,r),e.peek()&&!e.peek().match(/^\W$/)||(a="link");else if(p(t)==H||e.match(H,!1))switch(l(t)){case 0:!e.peek()||e.peek().match(/^\W$/)?u(t,r,i(H,1)):e.match(H);break;case 1:u(t,r,i(H,2)),c(e.match(/^`/)),a="link";break;case 2:u(t,r,i(H,3)),c(e.match(_));break;case 3:u(t,r,i(H,4)),c(e.match(/^`_/)),a="link";break;default:u(t,r),c(""==e.current())}else e.match(Q)?u(t,m):e.next()&&u(t,r);return a}function n(e,t){var a=null;if(p(t)==S||e.match(S,!1))switch(l(t)){case 0:u(t,n,i(S,1)),c(e.match(F)),a="variable-2";break;case 1:u(t,n,i(S,2)),c(e.match(G));break;case 2:u(t,n,i(S,3)),c(e.match(J)),a="keyword";break;case 3:u(t,n,i(S,4)),c(e.match(K)),a="meta";break;default:u(t,r),c(""==e.current())}else if(p(t)==$||e.match($,!1))switch(l(t)){case 0:u(t,n,i($,1)),c(e.match(B)),a="keyword",e.current().match(/^(?:math|latex)/)?t.tmp_stex=!0:e.current().match(/^python/)&&(t.tmp_py=!0);break;case 1:u(t,n,i($,2)),c(e.match(D)),a="meta",(e.match(/^latex\s*$/)||t.tmp_stex)&&(t.tmp_stex=void 0,u(t,h,{mode:k,local:k.startState()}));break;case 2:u(t,n,i($,3)),(e.match(/^python\s*$/)||t.tmp_py)&&(t.tmp_py=void 0,u(t,h,{mode:d,local:d.startState()}));break;default:u(t,r),c(""==e.current())}else if(p(t)==M||e.match(M,!1))switch(l(t)){case 0:u(t,n,i(M,1)),c(e.match(L)),c(e.match(N)),a="link";break;case 1:u(t,n,i(M,2)),c(e.match(O)),a="meta";break;default:u(t,r),c(""==e.current())}else e.match(W)?(u(t,r),a="quote"):e.match(C)?(u(t,r),a="quote"):(e.eatSpace(),e.eol()?u(t,r):(e.skipToEnd(),u(t,s),a="comment"));return a}function s(e,t){return o(e,t,"comment")}function m(e,t){return o(e,t,"meta")}function o(e,t,a){return e.eol()||e.eatSpace()?(e.skipToEnd(),a):(u(t,r),null)}function h(e,t){return t.ctx.mode&&t.ctx.local?e.sol()?(e.eatSpace()||u(t,r),null):t.ctx.mode.token(e,t.ctx.local):(u(t,r),null)}function i(e,t,a,c){return{phase:e,stage:t,mode:a,local:c}}function u(e,t,a){e.tok=t,e.ctx=a||{}}function l(e){return e.ctx.stage||0}function p(e){return e.ctx.phase}a.prototype.toString=function(){return"AssertException: "+this.message};var d=CodeMirror.getMode(e,"python"),k=CodeMirror.getMode(e,"stex"),x="(?:\\s*|\\W|$)",f=new RegExp(t("^{0}",x)),w="(?:[^\\W\\d_](?:[\\w!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)",g=new RegExp(t("^{0}",w)),b=t("(?:{0}|`{1}`)",w,"(?:[^\\W\\d_](?:[\\w\\s!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)"),E="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)",R="(?:[^\\`]+)",_=new RegExp(t("^{0}",R)),y=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$"),v=new RegExp(t("^\\.\\.{0}","\\s+")),M=new RegExp(t("^_{0}:{1}|^__:{1}",b,x)),$=new RegExp(t("^{0}::{1}",b,x)),S=new RegExp(t("^\\|{0}\\|{1}{2}::{3}",E,"\\s+",b,x)),W=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]{1}",b,x)),C=new RegExp(t("^\\[{0}\\]{1}",b,x)),q=new RegExp(t("^\\|{0}\\|",E)),T=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]_",b)),A=new RegExp(t("^\\[{0}\\]_",b)),I=new RegExp(t("^{0}__?",b)),H=new RegExp(t("^`{0}`_",R)),P=new RegExp(t("^:{0}:`{1}`{2}",w,R,x)),j=new RegExp(t("^`{1}`:{0}:{2}",w,R,x)),z=new RegExp(t("^:{0}:{1}",w,x)),B=new RegExp(t("^{0}",b)),D=new RegExp(t("^::{0}",x)),F=new RegExp(t("^\\|{0}\\|",E)),G=new RegExp(t("^{0}","\\s+")),J=new RegExp(t("^{0}",b)),K=new RegExp(t("^::{0}",x)),L=new RegExp("^_"),N=new RegExp(t("^{0}|_",b)),O=new RegExp(t("^:{0}",x)),Q=new RegExp("^::\\s*$"),U=new RegExp("^\\s+(?:>>>|In \\[\\d+\\]:)\\s");return{startState:function(){return{tok:r,ctx:i(void 0,0)}},copyState:function(e){return{tok:e.tok,ctx:e.ctx}},innerMode:function(e){return e.tmp?{state:e.tmp.local,mode:e.tmp.mode}:e.ctx?{state:e.ctx.local,mode:e.ctx.mode}:null},token:function(e,t){return t.tok(e,t)}}},"python","stex"),CodeMirror.defineMode("rst",function(e,t){var a=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*/,c=new RegExp("^[Hh][Tt][Tt][Pp][Ss]?://(?:[\\d\\w.-]+)\\.(?:\\w{2,6})(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*"),r={token:function(e){if(e.match(a)&&e.match(/\W+|$/,!1))return"strong";if(e.match(/^\*[^\*\s](?:[^\*]*[^\*\s])?\*/)&&e.match(/\W+|$/,!1))return"em";if(e.match(/^``[^`\s](?:[^`]*[^`\s])``/)&&e.match(/\W+|$/,!1))return"string-2";if(e.match(/^(?:[\d]+(?:[\.,]\d+)*)/))return"number";if(e.match(/^(?:\s\+[\d]+(?:[\.,]\d+)*)/))return"positive";if(e.match(/^(?:\s\-[\d]+(?:[\.,]\d+)*)/))return"negative";if(e.match(c))return"link";for(;!(null==e.next()||e.match(a,!1)||e.match(/^\*[^\*\s](?:[^\*]*[^\*\s])?\*/,!1)||e.match(/^``[^`\s](?:[^`]*[^`\s])``/,!1)||e.match(/^(?:[\d]+(?:[\.,]\d+)*)/,!1)||e.match(/^(?:\s\+[\d]+(?:[\.,]\d+)*)/,!1)||e.match(/^(?:\s\-[\d]+(?:[\.,]\d+)*)/,!1)||e.match(c,!1)););return null}},n=CodeMirror.getMode(e,t.backdrop||"rst-base");return CodeMirror.overlayMode(n,r,!0)},"python","stex"),CodeMirror.defineMIME("text/x-rst","rst");