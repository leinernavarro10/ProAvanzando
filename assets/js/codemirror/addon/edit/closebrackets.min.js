!function(){function e(e,r){var o=e.getRange(CodeMirror.Pos(r.line,r.ch-1),CodeMirror.Pos(r.line,r.ch+1));return 2==o.length?o:null}function r(r){for(var o={name:"autoCloseBrackets",Backspace:function(o){if(o.somethingSelected()||o.getOption("disableInput"))return CodeMirror.Pass;var n=o.getCursor(),t=e(o,n);if(!t||r.indexOf(t)%2!=0)return CodeMirror.Pass;o.replaceRange("",CodeMirror.Pos(n.line,n.ch-1),CodeMirror.Pos(n.line,n.ch+1))}},t="",i=0;i<r.length;i+=2)!function(e,r){function i(o){var n=o.getSelection();o.replaceSelection(e+n+r)}function a(e){var o=e.getCursor();if(e.getRange(o,CodeMirror.Pos(o.line,o.ch+1))!=r||e.somethingSelected())return CodeMirror.Pass;e.execCommand("goCharRight")}e!=r&&(t+=r),o["'"+e+"'"]=function(o){if("'"==e&&"comment"==o.getTokenAt(o.getCursor()).type||o.getOption("disableInput"))return CodeMirror.Pass;if(o.somethingSelected())return i(o);if(e!=r||a(o)==CodeMirror.Pass){var c=o.getCursor(),s=CodeMirror.Pos(c.line,c.ch+1),l=o.getLine(c.line),d=l.charAt(c.ch),u=c.ch>0?l.charAt(c.ch-1):"";return e==r&&CodeMirror.isWordChar(u)?CodeMirror.Pass:l.length==c.ch||t.indexOf(d)>=0||n.test(d)?void o.replaceSelection(e+r,{head:s,anchor:s}):CodeMirror.Pass}},e!=r&&(o["'"+r+"'"]=a)}(r.charAt(i),r.charAt(i+1));return o}function o(r){return function(o){var n=o.getCursor(),t=e(o,n);if(!t||r.indexOf(t)%2!=0||o.getOption("disableInput"))return CodeMirror.Pass;o.operation(function(){var e=CodeMirror.Pos(n.line+1,0);o.replaceSelection("\n\n",{anchor:e,head:e},"+input"),o.indentLine(n.line+1,null,!0),o.indentLine(n.line+2,null,!0)})}}var n=/\s/;CodeMirror.defineOption("autoCloseBrackets",!1,function(e,n,t){if(t!=CodeMirror.Init&&t&&e.removeKeyMap("autoCloseBrackets"),n){var i="()[]{}''\"\"",a="[]{}";"string"==typeof n?i=n:"object"==typeof n&&(null!=n.pairs&&(i=n.pairs),null!=n.explode&&(a=n.explode));var c=r(i);a&&(c.Enter=o(a)),e.addKeyMap(c)}})}();