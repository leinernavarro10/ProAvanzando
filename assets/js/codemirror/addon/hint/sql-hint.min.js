!function(){"use strict";function r(r){var t=r.doc.modeOption;return"sql"===t&&(t="text/x-sql"),CodeMirror.resolveMode(t).keywords}function t(r,t){var e=r.length,n=t.substr(0,e);return r.toUpperCase()===n.toUpperCase()}function e(r,e,n,o){for(var s in n)n.hasOwnProperty(s)&&(Array.isArray(n)&&(s=n[s]),t(e,s)&&r.push(o(s)))}function n(r,t){var n=t.getCursor(),o=t.getTokenAt(n),s=o.string.substr(1),i=CodeMirror.Pos(n.line,o.start),u=t.getTokenAt(i).string;l.hasOwnProperty(u)||(u=a(u,t));var f=l[u];f&&e(r,s,f,function(r){return"."+r})}function o(r,t){if(r)for(var e=r.split(" "),n=0;n<e.length;n++)t(e[n]?e[n].replace(/[,;]/g,""):"")}function s(r){return r.line+r.ch/Math.pow(10,6)}function i(r){return CodeMirror.Pos(Math.floor(r),+r.toString().split(".").pop())}function a(r,t){for(var e=t.doc,n=e.getValue(),a=r.toUpperCase(),u="",f="",p=[],g={start:CodeMirror.Pos(0,0),end:CodeMirror.Pos(t.lastLine(),t.getLineHandle(t.lastLine()).length)},c=n.indexOf(d.QUERY_DIV);-1!=c;)p.push(e.posFromIndex(c)),c=n.indexOf(d.QUERY_DIV,c+1);p.unshift(CodeMirror.Pos(0,0)),p.push(CodeMirror.Pos(t.lastLine(),t.getLineHandle(t.lastLine()).text.length));for(var C=0,h=s(t.getCursor()),v=0;v<p.length;v++){var M=s(p[v]);if(h>C&&h<=M){g={start:i(C),end:i(M)};break}C=M}for(var P=e.getRange(g.start,g.end,!1),v=0;v<P.length&&(o(P[v],function(r){var t=r.toUpperCase();t===a&&l.hasOwnProperty(u)&&(f=u),t!==d.ALIAS_KEYWORD&&(u=r)}),!f);v++);return f}function u(t,o){l=o&&o.tables||{},f=f||r(t);var s=t.getCursor(),i=t.getTokenAt(s),a=[],u=i.string.trim();return e(a,u,f,function(r){return r.toUpperCase()}),e(a,u,l,function(r){return r}),0===u.lastIndexOf(".")&&n(a,t),{list:a,from:CodeMirror.Pos(s.line,i.start),to:CodeMirror.Pos(s.line,i.end)}}var l,f,d={QUERY_DIV:";",ALIAS_KEYWORD:"AS"};CodeMirror.registerHelper("hint","sql",u)}();