var neonLogin=neonLogin||{};!function(n,o,e){"use strict";n(document).ready(function(){neonLogin.$container=n("#form_login"),neonLogin.$container.validate({rules:{username:{required:!0},password:{required:!0}},highlight:function(o){n(o).closest(".input-group").addClass("validate-has-error")},unhighlight:function(o){n(o).closest(".input-group").removeClass("validate-has-error")},submitHandler:function(e){n(".login-page").addClass("logging-in"),n(".form-login-error").slideUp("fast"),setTimeout(function(){var e=25+Math.round(30*Math.random());neonLogin.setPercentage(40+e),n.ajax({url:"DOLogin.php",method:"POST",dataType:"json",data:{username:n("input#username").val(),password:n("input#password").val()},success:function(e){var i=e.login_status;neonLogin.setPercentage(100),setTimeout(function(){"invalid"==i?(n(".login-page").removeClass("logging-in"),neonLogin.resetProgressBar(!0)):"success"==i&&setTimeout(function(){var n=baseurl;e.redirect_url&&e.redirect_url.length&&(n=e.redirect_url),o.location.href=n},400)},1e3)}})},650)}});var e=n(".login-page").hasClass("is-lockscreen");if(e&&(neonLogin.$container=n("#form_lockscreen"),neonLogin.$ls_thumb=neonLogin.$container.find(".lockscreen-thumb"),neonLogin.$container.validate({rules:{password:{required:!0}},highlight:function(o){n(o).closest(".input-group").addClass("validate-has-error")},unhighlight:function(o){n(o).closest(".input-group").removeClass("validate-has-error")},submitHandler:function(o){n(".login-page").addClass("logging-in-lockscreen"),setTimeout(function(){var n=25+Math.round(30*Math.random());neonLogin.setPercentage(n,function(){setTimeout(function(){neonLogin.setPercentage(100,function(){setTimeout("window.location.href = '../../'",600)},2)},820)})},650)}})),neonLogin.$body=n(".login-page"),neonLogin.$login_progressbar_indicator=n(".login-progressbar-indicator h3"),neonLogin.$login_progressbar=neonLogin.$body.find(".login-progressbar div"),neonLogin.$login_progressbar_indicator.html("0%"),neonLogin.$body.hasClass("login-form-fall")){var i=!1;setTimeout(function(){neonLogin.$body.addClass("login-form-fall-init"),setTimeout(function(){i||(neonLogin.$container.find("input:first").focus(),i=!0)},550)},0)}else neonLogin.$container.find("input:first").focus();if(neonLogin.$container.find(".form-control").each(function(o,e){var i=n(e),r=i.closest(".input-group");i.prev(".input-group-addon").click(function(){i.focus()}),i.on({focus:function(){r.addClass("focused")},blur:function(){r.removeClass("focused")}})}),n.extend(neonLogin,{setPercentage:function(n,o){if(n=parseInt(n/100*100,10)+"%",e){neonLogin.$lockscreen_progress_indicator.html(n);i={pct:l};return void TweenMax.to(i,.7,{pct:parseInt(n,10),roundProps:["pct"],ease:Sine.easeOut,onUpdate:function(){neonLogin.$lockscreen_progress_indicator.html(i.pct+"%"),u(parseInt(i.pct,10)/100)},onComplete:o})}neonLogin.$login_progressbar_indicator.html(n),neonLogin.$login_progressbar.width(n);var i={pct:parseInt(neonLogin.$login_progressbar.width()/neonLogin.$login_progressbar.parent().width()*100,10)};TweenMax.to(i,.7,{pct:parseInt(n,10),roundProps:["pct"],ease:Sine.easeOut,onUpdate:function(){neonLogin.$login_progressbar_indicator.html(i.pct+"%")},onComplete:o})},resetProgressBar:function(o){TweenMax.set(neonLogin.$container,{css:{opacity:0}}),setTimeout(function(){if(TweenMax.to(neonLogin.$container,.6,{css:{opacity:1},onComplete:function(){neonLogin.$container.attr("style","")}}),neonLogin.$login_progressbar_indicator.html("0%"),neonLogin.$login_progressbar.width(0),o){var e=n(".form-login-error");e.show();var i=e.outerHeight();e.css({height:0}),TweenMax.to(e,.45,{css:{height:i},onComplete:function(){e.css({height:"auto"})}}),neonLogin.$container.find('input[type="password"]').val("")}},800)}}),e){neonLogin.$lockscreen_progress_canvas=n("<canvas></canvas>"),neonLogin.$lockscreen_progress_indicator=neonLogin.$container.find(".lockscreen-progress-indicator"),neonLogin.$lockscreen_progress_canvas.appendTo(neonLogin.$ls_thumb);var r=neonLogin.$ls_thumb.width()+3;neonLogin.$lockscreen_progress_canvas.attr({width:r,height:r}).css({top:-1.5,left:-1.5}),neonLogin.lockscreen_progress_canvas=neonLogin.$lockscreen_progress_canvas.get(0);var t=neonLogin.lockscreen_progress_canvas,s=s=t.getContext("2d"),a=null,g=2*Math.PI,c=Math.PI/2,l=0;s.beginPath(),s.strokeStyle="#eb7067",s.lineCap="square",s.closePath(),s.fill(),s.lineWidth=3,a=s.getImageData(0,0,r,r);var u=function(n){s.putImageData(a,0,0),s.beginPath(),s.arc(r/2,r/2,70,-c,g*n-c,!1),s.stroke(),l=100*n};u(0),neonLogin.$lockscreen_progress_indicator.html("0%"),s.restore()}})}(jQuery,window);