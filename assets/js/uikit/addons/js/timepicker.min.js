!function(i,t,e){var h=function(i,e){var s=t(i);s.data("timepicker")||(this.$element=s,this.element=this.$element[0],this.options=t.extend({},h.defaults,e),this.$element.on({"focus.timepicker.uikit":t.proxy(this.highlightUnit,this),"click.timepicker.uikit":t.proxy(this.highlightUnit,this),"keydown.timepicker.uikit":t.proxy(this.onKeydown,this),"blur.timepicker.uikit":t.proxy(this.blurElement,this)}),this.setDefaultTime(this.options.defaultTime),this.element.data("timepicker",this))};h.defaults={defaultTime:"current",disableFocus:!1,minuteStep:15,secondStep:15,showSeconds:!1,showMeridian:!1},t.extend(h.prototype,{setDefaultTime:function(i){if(this.element.value)this.updateFromElementVal();else if("current"===i){var t=new Date;this.hour=t.getHours(),this.minute=Math.floor(t.getMinutes()/this.options.minuteStep)*this.options.minuteStep,this.second=Math.floor(t.getSeconds()/this.options.secondStep)*this.options.secondStep,this.meridian="AM",this.options.showMeridian&&(0===this.hour?this.hour=12:this.hour>=12?(this.hour>12&&(this.hour=this.hour-12),this.meridian="PM"):this.meridian="AM"),this.update()}else!1===i?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(i)},setTime:function(i){var t,e;this.options.showMeridian?(e=(t=i.split(" "))[0].split(":"),this.meridian=t[1]):e=i.split(":"),this.hour=parseInt(e[0],10),this.minute=parseInt(e[1],10),this.second=parseInt(e[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.options.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":"pm"!==this.meridian&&"p"!==this.meridian||(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.options.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},decrementHour:function(){if(this.options.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(i){var t=i?this.minute-i:this.minute-this.options.minuteStep;t<0?(this.decrementHour(),this.minute=t+60):this.minute=t,this.update()},decrementSecond:function(){var i=this.second-this.options.secondStep;i<0?(this.decrementMinute(!0),this.second=i+60):this.second=i,this.update()},onKeydown:function(i){switch(i.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":i.preventDefault(),this.highlightNextUnit();break;case"minute":(this.options.showMeridian||this.options.showSeconds)&&(i.preventDefault(),this.highlightNextUnit());break;case"second":this.options.showMeridian&&(i.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:i.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(i.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:i.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(i.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(i,t,e,h){return i=i<10?"0"+i:i,t=t<10?"0"+t:t,e=e<10?"0"+e:e,i+":"+t+(this.options.showSeconds?":"+e:"")+(this.options.showMeridian?" "+h:"")},getCursorPosition:function(){if("selectionStart"in this.element)return this.element.selectionStart;if(document.selection){this.element.focus();var i=document.selection.createRange(),t=document.selection.createRange().text.length;return i.moveStart("character",-this.element.value.length),i.text.length-t}},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.options.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.options.showSeconds?this.highlightSecond():this.options.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.options.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.options.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var i=this.element;this.highlightedUnit="hour",i.setSelectionRange&&setTimeout(function(){i.setSelectionRange(0,2)},0)},highlightMinute:function(){var i=this.element;this.highlightedUnit="minute",i.setSelectionRange&&setTimeout(function(){i.setSelectionRange(3,5)},0)},highlightSecond:function(){var i=this.element;this.highlightedUnit="second",i.setSelectionRange&&setTimeout(function(){i.setSelectionRange(6,8)},0)},highlightMeridian:function(){var i=this.element;this.highlightedUnit="meridian",i.setSelectionRange&&(this.options.showSeconds?setTimeout(function(){i.setSelectionRange(9,11)},0):setTimeout(function(){i.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.options.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}if(23===this.hour)return void(this.hour=0);this.hour++,this.update()},incrementMinute:function(i){var t=i?this.minute+i:this.minute+this.options.minuteStep-this.minute%this.options.minuteStep;t>59?(this.incrementHour(),this.minute=t-60):this.minute=t,this.update()},incrementSecond:function(){var i=this.second+this.options.secondStep-this.second%this.options.secondStep;i>59?(this.incrementMinute(!0),this.second=i-60):this.second=i,this.update()},remove:function(){t("document").off(".timepicker.uikit"),delete this.$element.data().timepicker},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement()},updateElement:function(){this.$element.val(this.getTime()).trigger("change")},updateFromElementVal:function(){this.element.value&&this.setTime(this.element.value)}}),t(document).on("focus.timepicker.uikit","[data-uk-timepicker]",function(i){var s=t(this);if(!s.data("timepicker")){i.preventDefault();new h(s,e.Utils.options(s.attr("data-uk-timepicker")));s.trigger("focus")}})}(0,jQuery,jQuery.UIkit);