!function(t,e,s,i,a){function l(e,i){var a=t(e);a.data("uksortable")||(this.w=t(s),this.el=a,this.options=t.extend({},t.fn.uksortable.defaults,i),this.tplempty='<div class="'+this.options.emptyClass+'"/>',this.el.find(">"+this.options.itemNodeName).addClass(this.options.listitemClass).end().find("ul:not(.ignore-list)").addClass(this.options.listClass).find(">li").addClass(this.options.listitemClass),this.el.children(this.options.itemNodeName).length||this.el.append(this.tplempty),this.el.data("uksortable",this),this.el.data("uksortable-id","ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())),this.init())}var o="ontouchstart"in s,n=t("html"),r=[],d=function(){var t=i.createElement("div"),e=i.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",e.appendChild(t);var a=s.getComputedStyle&&"auto"===s.getComputedStyle(t,"").pointerEvents;return e.removeChild(t),!!a}(),h=o?"touchstart":"mousedown",p=o?"touchmove":"mousemove",c=o?"touchend":"mouseup",m=o?"touchcancel":"mouseup";l.prototype={init:function(){var e=this;e.reset(),e.el.data("uksortable-group",this.options.group),e.placeEl=t('<div class="'+e.options.placeClass+'"/>'),t.each(this.el.find(e.options.itemNodeName),function(s,i){e.setParent(t(i))}),e.el.on("click","[data-sortable-action]",function(s){if(!e.dragEl&&(o||0===s.button)){s.preventDefault();var i=t(s.currentTarget),a=i.data("sortableAction"),l=i.closest(e.options.itemNodeName);"collapse"===a&&e.collapseItem(l),"expand"===a&&e.expandItem(l),"toggle"===a&&e.toggleItem(l)}});var i=function(s){var i=t(s.target);if(!i.hasClass(e.options.handleClass)){if(i.closest("."+e.options.noDragClass).length)return;i=i.closest("."+e.options.handleClass)}!i.length||e.dragEl||!o&&0!==s.button||o&&1!==s.touches.length||(s.preventDefault(),e.dragStart(o?s.touches[0]:s))},a=function(t){e.dragEl&&(t.preventDefault(),e.dragMove(o?t.touches[0]:t))},l=function(t){e.dragEl&&(t.preventDefault(),e.dragStop(o?t.touches[0]:t))};o?(e.el[0].addEventListener(h,i,!1),s.addEventListener(p,a,!1),s.addEventListener(c,l,!1),s.addEventListener(m,l,!1)):(e.el.on(h,i),e.w.on(p,a),e.w.on(c,l))},serialize:function(){var e=this;return step=function(s,i){var a=[];return s.children(e.options.itemNodeName).each(function(){var s=t(this),l=t.extend({},s.data()),o=s.children(e.options.listNodeName);o.length&&(l.children=step(o,i+1)),a.push(l)}),a},step(e.el,0)},list:function(e){var s=[],i=this,e=t.extend({},i.options,e),a=function(i,l,o){i.children(e.itemNodeName).each(function(i){var n=t(this),r=t.extend({parent_id:o||null,depth:l,order:i},n.data()),d=n.children(e.listNodeName);s.push(r),d.length&&a(d,l+1,n.data(e.idProperty||"id"))})};return a(i.el,0),s},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null;for(var t=0;t<r.length;t++)r[t].children().length||r[t].append(this.tplempty);r=[]},toggleItem:function(t){this[t.hasClass(this.options.collapsedClass)?"expandItem":"collapseItem"](t)},expandItem:function(t){t.removeClass(this.options.collapsedClass)},collapseItem:function(t){t.children(this.options.listNodeName).length&&t.addClass(this.options.collapsedClass)},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.expandItem(t(this))})},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.collapseItem(t(this))})},setParent:function(t){t.children(this.options.listNodeName).length&&t.addClass("uk-parent")},unsetParent:function(t){t.removeClass("uk-parent "+this.options.collapsedClass),t.children(this.options.listNodeName).remove()},dragStart:function(e){var s=this.mouse,a=t(e.target).closest(this.options.itemNodeName),l=a.offset();this.placeEl.css("height",a.height()),s.offsetX=e.pageX-l.left,s.offsetY=e.pageY-l.top,s.startX=s.lastX=l.left,s.startY=s.lastY=l.top,this.dragRootEl=this.el,this.dragEl=t(i.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",a.width()),this.tmpDragOnSiblings=[a[0].previousSibling,a[0].nextSibling],a.after(this.placeEl),a[0].parentNode.removeChild(a[0]),a.appendTo(this.dragEl),t(i.body).append(this.dragEl),this.dragEl.css({left:l.left,top:l.top});var o,r,d=this.dragEl.find(this.options.itemNodeName);for(o=0;o<d.length;o++)(r=t(d[o]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=r);n.addClass(this.options.movingClass)},dragStop:function(t){var e=this.dragEl.children(this.options.itemNodeName).first();e[0].parentNode.removeChild(e[0]),this.placeEl.replaceWith(e),this.dragEl.remove(),this.tmpDragOnSiblings[0]==e[0].previousSibling&&this.tmpDragOnSiblings[0]==e[0].previousSibling||(this.el.trigger("sortable-change",[e,this.hasNewRoot?"added":"moved"]),this.hasNewRoot&&this.dragRootEl.trigger("sortable-change",[e,"removed"])),this.reset(),n.removeClass(this.options.movingClass)},dragMove:function(e){var a,l,o,n=this.options,h=this.mouse;this.dragEl.css({left:e.pageX-h.offsetX,top:e.pageY-h.offsetY}),h.lastX=h.nowX,h.lastY=h.nowY,h.nowX=e.pageX,h.nowY=e.pageY,h.distX=h.nowX-h.lastX,h.distY=h.nowY-h.lastY,h.lastDirX=h.dirX,h.lastDirY=h.dirY,h.dirX=0===h.distX?0:h.distX>0?1:-1,h.dirY=0===h.distY?0:h.distY>0?1:-1;var p=Math.abs(h.distX)>Math.abs(h.distY)?1:0;if(!h.moving)return h.dirAx=p,void(h.moving=!0);h.dirAx!==p?(h.distAxX=0,h.distAxY=0):(h.distAxX+=Math.abs(h.distX),0!==h.dirX&&h.dirX!==h.lastDirX&&(h.distAxX=0),h.distAxY+=Math.abs(h.distY),0!==h.dirY&&h.dirY!==h.lastDirY&&(h.distAxY=0)),h.dirAx=p,h.dirAx&&h.distAxX>=n.threshold&&(h.distAxX=0,o=this.placeEl.prev(n.itemNodeName),h.distX>0&&o.length&&!o.hasClass(n.collapsedClass)&&(a=o.find(n.listNodeName).last(),this.placeEl.parents(n.listNodeName).length+this.dragDepth<=n.maxDepth&&(a.length?(a=o.children(n.listNodeName).last()).append(this.placeEl):((a=t("<"+n.listNodeName+"/>").addClass(n.listClass)).append(this.placeEl),o.append(a),this.setParent(o)))),h.distX<0&&(this.placeEl.next(n.itemNodeName).length||(l=this.placeEl.parent(),this.placeEl.closest(n.itemNodeName).after(this.placeEl),l.children().length||this.unsetParent(l.parent()))));var c=!1;if(d||(this.dragEl[0].style.visibility="hidden"),this.pointEl=t(i.elementFromPoint(e.pageX-i.body.scrollLeft,e.pageY-(s.pageYOffset||i.documentElement.scrollTop))),d||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(n.handleClass))this.pointEl=this.pointEl.closest(n.itemNodeName);else{var m=this.pointEl.closest("."+n.itemClass);m.length&&(this.pointEl=m.closest(n.itemNodeName))}if(this.pointEl.hasClass(n.emptyClass))c=!0;else if(this.pointEl.data("uksortable")&&!this.pointEl.children().length)c=!0,this.pointEl=t(this.tplempty).appendTo(this.pointEl);else if(!this.pointEl.length||!this.pointEl.hasClass(n.listitemClass))return;var g=this.el,u=this.pointEl.closest("."+this.options.listBaseClass),f=g[0]!==this.pointEl.closest("."+this.options.listBaseClass)[0],E=u;if(!h.dirAx||f||c){if(f&&n.group!==E.data("uksortable-group"))return;if(r.push(g),this.dragDepth-1+this.pointEl.parents(n.listNodeName).length>n.maxDepth)return;var v=e.pageY<this.pointEl.offset().top+this.pointEl.height()/2;l=this.placeEl.parent(),c?this.pointEl.replaceWith(this.placeEl):v?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),l.children().length||l.data("uksortable")||this.unsetParent(l.parent()),this.dragRootEl.find(n.itemNodeName).length||this.dragRootEl.children().length||this.dragRootEl.append(this.tplempty),f&&(this.dragRootEl=u,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},t.fn.uksortable=function(e){var s=this,i=this;return s.each(function(){var s=t(this),a=s.data("uksortable");a?"string"==typeof e&&"function"==typeof a[e]&&(i=a[e]()):a=new l(s,e)}),i||s},t.fn.uksortable.defaults={prefix:"uk",listNodeName:"ul",itemNodeName:"li",listBaseClass:"{prefix}-sortable",listClass:"{prefix}-sortable-list",listitemClass:"{prefix}-sortable-list-item",itemClass:"{prefix}-sortable-item",dragClass:"{prefix}-sortable-list-dragged",movingClass:"{prefix}-sortable-moving",handleClass:"{prefix}-sortable-handle",collapsedClass:"{prefix}-collapsed",placeClass:"{prefix}-sortable-placeholder",noDragClass:"{prefix}-sortable-nodrag",emptyClass:"{prefix}-sortable-empty",group:0,maxDepth:10,threshold:20},t(i).on("uk-domready",function(s){t("[data-uk-sortable]").each(function(){var s=t(this),i=t.extend({},t.fn.uksortable.defaults,e.Utils.options(s.attr("data-uk-sortable")));Object.keys(i).forEach(function(t){-1!=String(i[t]).indexOf("{prefix}")&&(i[t]=i[t].replace("{prefix}",i.prefix))}),s.data("uksortable")||s.uksortable(i)})})}(window.jQuery,jQuery.UIkit,window,document);