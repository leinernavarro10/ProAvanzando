var neonNotes=neonNotes||{};!function(e,n,t){"use strict";e(document).ready(function(){neonNotes.$container=e(".notes-env"),e.extend(neonNotes,{isPresent:neonNotes.$container.length>0,noTitleText:"Untitled",noDescriptionText:"(No content)",$currentNote:e(null),$currentNoteTitle:e(null),$currentNoteDescription:e(null),$currentNoteContent:e(null),$currentNoteId:e(null),addNote:function(){var n;jQuery.post("funcionesAJAXGeneral.php",{f:"NUEVA-NOTA",titulo:neonNotes.noTitleText,descripcion:neonNotes.noDescriptionText}).done(function(e){t.find("i").html(e),n=e});var t=e('<li><a href="#"><strong></strong><span></span><i style="display:none"></i></li></a></li>');t.append('<div class="content"></div>').append('<button class="note-close" onclick="quitarNota('+n+')">&times;</button>'),t.find("strong").html(neonNotes.noTitleText),t.find("span").html(neonNotes.noDescriptionText),neonNotes.$notesList.prepend(t),TweenMax.set(t,{autoAlpha:0});var o=new TimelineMax;o.append(TweenMax.to(t,.1,{css:{autoAlpha:1}})),o.append(TweenMax.to(t,.15,{css:{autoAlpha:.8}})),o.append(TweenMax.to(t,.15,{css:{autoAlpha:1}})),neonNotes.$notesList.find("li").removeClass("current"),t.addClass("current"),neonNotes.$writePadTxt.focus(),neonNotes.checkCurrentNote()},checkCurrentNote:function(){var n=neonNotes.$notesList.find("li.current").first();if(n.length)neonNotes.$currentNote=n,neonNotes.$currentNoteTitle=n.find("strong"),neonNotes.$currentNoteDescription=n.find("span"),neonNotes.$currentNoteContent=n.find(".content"),neonNotes.$currentNoteId=n.find("i"),neonNotes.$writePadTxt.val(e.trim(neonNotes.$currentNoteContent.html())).trigger("autosize.resize");else{var t=neonNotes.$notesList.find("li:first:not(.no-notes)");t.length?(t.addClass("current"),neonNotes.checkCurrentNote()):(neonNotes.$writePadTxt.val(""),neonNotes.$currentNote=e(null),neonNotes.$currentNoteTitle=e(null),neonNotes.$currentNoteDescription=e(null),neonNotes.$currentNoteContent=e(null))}},updateCurrentNoteText:function(){var n=e.trim(neonNotes.$writePadTxt.val()),t=n;if(neonNotes.$currentNote.length){var o="",s="";if(n.length)for(var r=n.split("\n"),i=1,N=0;N<r.length&&(r[N]&&(1==i?o=r[N]:2==i&&(s=r[N]),i++),!(i>2));N++);var c=neonNotes.$currentNoteId.text();""==o&&(o=neonNotes.noTitleText),""==s&&(s=neonNotes.noDescriptionText),jQuery.post("funcionesAJAXGeneral.php",{f:"MODIFICAR-NOTA",id:c,titulo:o,descripcion:s,contenido:t}).done(function(e){}),neonNotes.$currentNoteTitle.text(o.length?o:neonNotes.noTitleText),neonNotes.$currentNoteDescription.text(s.length?s:neonNotes.noDescriptionText),neonNotes.$currentNoteContent.text(n)}else n.length&&neonNotes.addNote()}}),neonNotes.isPresent&&(neonNotes.$notesList=neonNotes.$container.find(".list-of-notes"),neonNotes.$writePad=neonNotes.$container.find(".write-pad"),neonNotes.$writePadTxt=neonNotes.$writePad.find("textarea"),neonNotes.$addNote=neonNotes.$container.find("#add-note"),neonNotes.$addNote.on("click",function(e){neonNotes.addNote()}),neonNotes.$writePadTxt.on("keyup",function(e){neonNotes.updateCurrentNoteText()}),neonNotes.checkCurrentNote(),neonNotes.$notesList.on("click","li a",function(n){n.preventDefault(),neonNotes.$notesList.find("li").removeClass("current"),e(this).parent().addClass("current"),neonNotes.checkCurrentNote()}),neonNotes.$notesList.on("click","li .note-close",function(n){n.preventDefault();var t=e(this).parent();(new TimelineMax).append(TweenMax.to(t,.15,{css:{autoAlpha:.2},onComplete:function(){t.slideUp("fast",function(){t.remove(),neonNotes.checkCurrentNote()})}}))}))})}(jQuery,window);